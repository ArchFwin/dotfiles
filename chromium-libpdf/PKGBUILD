# Maintainer: Andrew Webley <unsuspectinghero@gmail.com>
# Contributor: Dmitriy Morozov <archlinux@foxcub.org>

pkgname="chromium-libpdf"
#The pkgver is the same as for google chrome dev. The library isn't meant to be distributed on its own so no other version information exists.
pkgver="31.0.1650.4"
pkgrel="1"
pkgdesc="A PDF Viewer for Chromium and Chromium based browsers"
url="http://wiki.archlinux.org/index.php/Chromium#libpdf.so"
arch=("i686" "x86_64")
license=("custom:chrome")
depends=("gcc-libs")
optdepends=("chromium: default browser to use plugin in"
			"chromium-dev: development version of default browser, requires modifying the PKGBUILD"
			"iron-bin: alternate google-chrome based browser, requires modifying the PKGBUILD")
sha512sums=("2d09d2ca3c960f38463ed742a2f038e919363fe2cb8d65d86cd4672559b44369037d94f9a09ede478fadd20b4a6dc9271e8d1af1f2cc2bc92ed90d0a4810ac67")
source=(LICENSE)
if [ "$CARCH" = "i686" ]; then
	source+=("https://dl.google.com/linux/direct/google-chrome-unstable_current_i386.rpm")
    sha512sums+=("4d649a6ca8d3d4354696fe5bc586e2de4134e12dd782e3e376edc95d623efba72cc1eddad90e7f00ed0206560d7e066b16faa28ca7effd957be4e2d4354e705f")
elif [ "$CARCH" = "x86_64" ]; then
	source+=("https://dl.google.com/linux/direct/google-chrome-unstable_current_x86_64.rpm")
	sha512sums+=("5a80d2ed9da84f0e65545c8a6cda7d2a724591c52ef73cc6ed6920f95431e1f05a4da26258aa2d31856376512078f4a98f2b1326642adc9a5a8c3077effa31a4")
fi

package(){
	#Uncomment the relevant line below to install the library in the correct place if you're running something other than chromium.

	#chromium (Default)
	install -Dm755 "$srcdir/opt/google/chrome/libpdf.so" "$pkgdir/usr/lib/chromium/libpdf.so"

    #chromium-dev
    #install -Dm755 "$srcdir/opt/google/chrome/libpdf.so" "$pkgdir/usr/lib/chromium-dev/libpdf.so"

	#iron-browser
    #install -Dm755 "$srcdir/opt/google/chrome/libpdf.so" "$pkgdir/opt/iron/libpdf.so"

	install -Dm755 "$srcdir/LICENSE" "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
}
